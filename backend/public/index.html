
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Adyen Apple Pay Drop-in</title>
  <script src="https://checkoutshopper-test.adyen.com/checkoutshopper/sdk/5.66.0/adyen.js"></script>
  <link rel="stylesheet" href="https://checkoutshopper-test.adyen.com/checkoutshopper/sdk/5.66.0/adyen.css">
</head>
<body>
  <h2>Apple Pay via Adyen (Node.js)</h2>
  <div id="dropin"></div>
  <script>
    (async () => {
      const res = await fetch('/api/sessions', { method: 'POST' });
      const session = await res.json();

      const checkout = await AdyenCheckout({
        environment: 'test',
        clientKey: session.clientKey,
        session,
        onPaymentCompleted: r => alert(r.resultCode),
        onError: e => alert(e.message)
      });

      checkout.create('dropin').mount('#dropin');
    })();
  </script>
</body>
</html>
